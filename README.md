# SensorRestAPI-SpringBoot

Проект SensorRestApi-SpringBoot
Вторая часть задания - реализованый клиент -RestTemplateForSensor-java

Стек технологий и фреймворков:
SpringBoot, Postgresql, ModelMapper, starter-validator, starter-thymeleaf, starter-web, starter-data-jpa

Postgresql jdbc:postgresql://localhost:5432/sensor_rest_api_db

Запросы для тестирования в постмане и для RestTemplate:

•GET http://localhost:8080/measurements
- Возвращает все измерения из БД

•GET http://localhost:8080/measurements/rainyDaysCount
- Возвращает количество дождливых дней из БД

•POST http://localhost:8080/measurements/add
{
"temperatureValue": 15.5,
"raining": false,
"sensor": {
"name": "Sensor_1"
}
}
- Добавляет измерение

•POST http://localhost:8080/sensors/registration
{
"name": "Sensor_1"
}
- сохраняет сенсор в БД

•GET http://localhost:8080/sensors
- возвращает весь список сенсоров

•GET http://localhost:8080/sensors/{id}
- возвращает сенсор по id


-------------------------------------------------------------------------------
Описание проекта
Приобрели метеорологический датчик ("сенсор"). Этот датчик
измеряет температуру окружающего воздуха и может определять,
идет  дождь или нет.

Мы можем получать данные с сенсора и сохранять их в БД, чтобы
далее их анализировать ->Создан REST API для этого!

В качестве сенсора будет
выступать наш собственный компьютер!
То есть на нашем компьютере будет работать сервер со Spring
REST API приложением, и наш же компьютер будет слать HTTP
запросы к Spring приложению так, как будто он и есть "сенсор".
Для того, чтобы отправлять запросы к REST API приложению, мы
будем использовать RestTemplate
---------------------------------------------------------------------------

Реализация ТЗ к REST API
Описывается адрес API, данные которые передаются при запросе на
этот адрес и тот функционал, который должен предоставляться в
результате запроса на этот адрес
•POST /sensors/registration
Регистрирует новый сенсор в системе. Т.е.добавляет новый
сенсор в таблицу сенсоров в БД. У сенсоров есть только одно
поле - название.

Реализована валидация того, что сенсора с таким названием еще нет в БД
(Spring Validator). Если сенсор с таким названием есть в БД - возвращаем
клиенту сообщение с ошибкой.
Также, если название сенсора пустое или содержит менее 3 или более 30 символов,
клиенту  возвращается сообщение с ошибкой.

----------------------------------------------------------------------------------------------------------

•POST /measurements/add
Добавляет новое измерение. Это тот адрес, куда настоящий сенсор посылал бы свои данные.
Вещественное поле "temperatureValue" содержит значение температуры воздуха, булево поле "raining" содержит
значение true/false в зависимости от того, зарегистрировал ли сенсор дождь или нет. Помимо этого, в
этом запросе передается сам объект сенсора, который получил и отправляет эти "измерения".
Значения температуры воздуха, дождя сохраняются в таблице в БД. Также, в каждой строке этой
таблицы содержится название того сенсора, который прислал эти измерения. То есть
сущность "Измерение" имеет связь с сущностью "Сенсор"  по имени.
Все поля у измерения  валидируются.
Значение "temperatureValue" должно быть не пустым и находиться в диапазоне от -100 до 100.
Значение "raining" должно быть не пустым.
Значение "sensor" должно быть не пустым. При этом, название сенсора  валидируется в БД.
Сенсор с таким названием должен быть зарегистрирован в системе (должен быть в БД).
Если такого сенсора нет в БД - выдается ошибка. 
На сервере, у измерения, и при регистрации сенсора выставляться текущее время, и сохраняется в БД.

------------------------------------------------------------------------------------------------------

Всего в приложении  6 адресов обязательных:
1) Регистрация сенсора - •POST http://localhost:8080/sensors/registration
2) Добавление измерения от сенсора - •POST http://localhost:8080/measurements/add
3) Получение всех измерений - •GET http://localhost:8080/measurements
4) Получение количества дождливых дней - •GET http://localhost:8080/measurements/rainyDaysCount
5) Получение всех сенсоров - •GET http://localhost:8080/sensors
6) Получение сенсора по id - •GET http://localhost:8080/sensors/{id}





